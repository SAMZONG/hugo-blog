<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title class=pjax-title>HowTo Use pt-query-digest - SAMZONG</title><meta name=Description content><meta property="og:title" content="HowTo Use pt-query-digest"><meta property="og:description" content="0.1 1. ç®€ä»‹ç´¢å¼•å¯ä»¥æˆ‘ä»¬æ›´å¿«é€Ÿçš„æ‰§è¡ŒæŸ¥è¯¢ï¼Œä½†æ˜¯è‚¯å®šå­˜åœ¨ä¸åˆç†çš„ç´¢å¼•ï¼Œå¦‚æœæƒ³æ‰¾åˆ°é‚£äº›ç´¢å¼•ä¸æ˜¯å¾ˆåˆé€‚çš„æŸ¥è¯¢ï¼Œå¹¶åœ¨å®ƒä»¬æˆä¸ºé—®é¢˜å‰è¿›è¡Œä¼˜åŒ–ï¼Œåˆ™å¯ä»¥ä½¿ç”¨p"><meta property="og:type" content="article"><meta property="og:url" content="https://samzong.me/howto-use-pt-query-digest/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-09-22T15:20:12+00:00"><meta property="article:modified_time" content="2022-09-25T00:50:15+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="HowTo Use pt-query-digest"><meta name=twitter:description content="0.1 1. ç®€ä»‹ç´¢å¼•å¯ä»¥æˆ‘ä»¬æ›´å¿«é€Ÿçš„æ‰§è¡ŒæŸ¥è¯¢ï¼Œä½†æ˜¯è‚¯å®šå­˜åœ¨ä¸åˆç†çš„ç´¢å¼•ï¼Œå¦‚æœæƒ³æ‰¾åˆ°é‚£äº›ç´¢å¼•ä¸æ˜¯å¾ˆåˆé€‚çš„æŸ¥è¯¢ï¼Œå¹¶åœ¨å®ƒä»¬æˆä¸ºé—®é¢˜å‰è¿›è¡Œä¼˜åŒ–ï¼Œåˆ™å¯ä»¥ä½¿ç”¨p"><meta name=application-name content="SAMZONG"><meta name=apple-mobile-web-app-title content="SAMZONG"><meta name=theme-color content="#f8f8f8"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=canonical href=https://samzong.me/howto-use-pt-query-digest/><link rel=prev href=https://samzong.me/%E7%94%9F%E8%80%85%E5%AD%A4%E7%8B%AC/><link rel=next href=https://samzong.me/%E5%86%99%E7%9A%84%E5%BE%AE%E5%8D%9A/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/fontawesome-free/all.min.css><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/animate/animate.min.css><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"HowTo Use pt-query-digest","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/samzong.me\/howto-use-pt-query-digest\/"},"genre":"posts","keywords":"MySQL","wordcount":2131,"url":"https:\/\/samzong.me\/howto-use-pt-query-digest\/","datePublished":"2016-09-22T15:20:12+00:00","dateModified":"2022-09-25T00:50:15+08:00","publisher":{"@type":"Organization","name":"Samzong"},"author":{"@type":"Person","name":"Samzong"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>function setTheme(e){document.body.setAttribute("theme",e),document.documentElement.style.setProperty("color-scheme",e==="light"?"light":"dark")}function saveTheme(e){window.localStorage&&localStorage.setItem("theme",e)}function getMeta(e){const t=document.getElementsByTagName("meta");for(let n=0;n<t.length;n++)if(t[n].getAttribute("name")===e)return t[n];return""}if(window.localStorage&&localStorage.getItem("theme")){let e=localStorage.getItem("theme");e==="light"||e==="dark"||e==="black"?setTheme(e):setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}else""==="light"||""==="dark"||""==="black"?(setTheme(""),saveTheme("")):(saveTheme("auto"),setTheme(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));let metaColors={light:"#f8f8f8",dark:"#252627",black:"#000000"};getMeta("theme-color").content=metaColors[document.body.getAttribute("theme")]</script><div id=back-to-top></div><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=SAMZONG>SAMZONG</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>ğŸ¤– å…¨éƒ¨æ–‡ç«  </a><a class=menu-item href=/tags/>ğŸ· æ ‡ç­¾ </a><a class=menu-item href=/categories/>ğŸ“– åˆ†ç±» </a><a class=menu-item href=https://github.com/samzong/ title=GitHub rel="noopener noreferrer" target=_blank><i class='fab fa-github fa-fw'></i> GitHub </a><span class="menu-item delimiter"></span><a href=# onclick=return!1 class="menu-item language" title=é€‰æ‹©è¯­è¨€>ç®€ä½“ä¸­æ–‡<i class="fas fa-chevron-right fa-fw"></i>
<select class=language-select title="Select Language" id=language-select-desktop onchange="location=this.value"><option value=/howto-use-pt-query-digest/ selected>ç®€ä½“ä¸­æ–‡</option></select>
</a><span class="menu-item search" id=search-desktop><input type=text placeholder=æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹... id=search-input-desktop>
<a href=# onclick=return!1 class="search-button search-toggle" id=search-toggle-desktop title=æœç´¢><i class="fas fa-search fa-fw"></i></a>
<a href=# onclick=return!1 class="search-button search-clear" id=search-clear-desktop title=æ¸…ç©º><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span>
</span><a href=# onclick=return!1 class="menu-item theme-switch" title=åˆ‡æ¢ä¸»é¢˜><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=SAMZONG>SAMZONG</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹... id=search-input-mobile>
<a href=# onclick=return!1 class="search-button search-toggle" id=search-toggle-mobile title=æœç´¢><i class="fas fa-search fa-fw"></i></a>
<a href=# onclick=return!1 class="search-button search-clear" id=search-clear-mobile title=æ¸…ç©º><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=# onclick=return!1 class=search-cancel id=search-cancel-mobile>å–æ¶ˆ</a></div><a class=menu-item href=/posts/ title>ğŸ¤–å…¨éƒ¨æ–‡ç« </a><a class=menu-item href=/tags/ title>ğŸ·æ ‡ç­¾</a><a class=menu-item href=/categories/ title>ğŸ“–åˆ†ç±»</a><a class=menu-item href=https://github.com/samzong/ title=GitHub rel="noopener noreferrer" target=_blank><i class='fab fa-github fa-fw'></i>GitHub</a><a href=# onclick=return!1 class="menu-item theme-switch" title=åˆ‡æ¢ä¸»é¢˜>
<i class="fas fa-adjust fa-fw"></i>
</a><a href=# onclick=return!1 class=menu-item title=é€‰æ‹©è¯­è¨€>ç®€ä½“ä¸­æ–‡<i class="fas fa-chevron-right fa-fw"></i>
<select class=language-select title="Select Language" onchange="location=this.value"><option value=/howto-use-pt-query-digest/ selected>ç®€ä½“ä¸­æ–‡</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><script>document.getElementsByTagName("main")[0].setAttribute("pageStyle","wide")</script><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC","false")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">HowTo Use pt-query-digest</h1><div class=post-meta><div class=post-meta-line><span class=post-author><i class="author fas fa-user-circle fa-fw"></i><a href=/ title=Author rel=author class=author>Samzong</a>
</span>&nbsp;<span class=post-category>æ”¶å½•äº </span>&nbsp;<span class=post-category>ç±»åˆ« <a href=/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/><i class="far fa-folder fa-fw"></i>æ•°æ®åº“</a>&nbsp;<a href=/categories/mysql/><i class="far fa-folder fa-fw"></i>MySQL</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2016-09-22>2016-09-22</time>&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime=2022-09-25>2022-09-25</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;çº¦ 2131 å­—&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;é¢„è®¡é˜…è¯» 5 åˆ†é’Ÿ&nbsp;</div></div><div class="details toc" id=toc-static kept=true><div class="details-summary toc-title"><span>ç›®å½•</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><a href=#1-ç®€ä»‹>1. ç®€ä»‹</a></li><li><a href=#2-install-percona-toolkit--pt-query-digest>2. Install Percona Toolkit & pt-query-digest</a></li><li><a href=#3-å¼€å¯-mysqlæ…¢æ—¥å¿—>3. å¼€å¯ mysqlæ…¢æ—¥å¿—</a><ul><li><ul><li><a href=#a-æŸ¥çœ‹å½“å‰slow_query_log-çŠ¶æ€>a. æŸ¥çœ‹å½“å‰â€˜slow_query_logâ€™ çŠ¶æ€ï¼š</a></li><li><a href=#b-å¯åŠ¨slow_log-é…ç½®>b. å¯åŠ¨slow_log, é…ç½®</a></li></ul></li></ul></li><li><a href=#4-åˆ†æ>4. åˆ†æ</a><ul><li><ul><li><a href=#a-ç®€å•ä½¿ç”¨æ–¹æ³•>a. ç®€å•ä½¿ç”¨æ–¹æ³•ï¼š</a></li><li><a href=#b-ä»tcpdumpåŒ…ä¸­åˆ†æé€šè¿‡tcpdumpå‘½ä»¤æŠ“å–ä¸€å®šæ—¶é—´ç½‘ç»œæ•°æ®åŒ…ç„¶åè¿›è¡Œåˆ†æ>b. ä»tcpdumpåŒ…ä¸­åˆ†æï¼šé€šè¿‡tcpdumpå‘½ä»¤æŠ“å–ä¸€å®šæ—¶é—´ç½‘ç»œæ•°æ®åŒ…ï¼Œç„¶åè¿›è¡Œåˆ†æï¼š</a></li><li><a href=#c-pt-query-digest-è¿˜æ”¯æŒå¾ˆå¯¹å…¶ä»–çš„æ•°æ®åŒ…åˆ†æå½¢åŠ¿ä½†æ˜¯æˆ‘ä»¬ä¸»è¦ä½¿ç”¨çš„è¿˜æ˜¯é’ˆå¯¹æ…¢æ—¥å¿—è¿›è¡Œåˆ†æ>c. pt-query-digest è¿˜æ”¯æŒå¾ˆå¯¹å…¶ä»–çš„æ•°æ®åŒ…åˆ†æå½¢åŠ¿ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸»è¦ä½¿ç”¨çš„è¿˜æ˜¯é’ˆå¯¹æ…¢æ—¥å¿—è¿›è¡Œåˆ†æ</a></li></ul></li></ul></li><li><a href=#5-ä½¿ç”¨anemometerå°†pt-query-digestçš„mysqlæ…¢æŸ¥è¯¢å¯è§†åŒ–>5. ä½¿ç”¨Anemometerå°†pt-query-digestçš„MySQLæ…¢æŸ¥è¯¢å¯è§†åŒ–</a><ul><li><ul><li><a href=#51-å®‰è£…>5.1 å®‰è£…</a></li><li><a href=#52-é…ç½®>5.2 é…ç½®</a></li><li><a href=#53-å¯¼å…¥>5.3 å¯¼å…¥</a></li></ul></li></ul></li></ul></li></ul></nav></div></div><div class=content id=content><h3 id=1-ç®€ä»‹ class=headerLink><a href=#1-%e7%ae%80%e4%bb%8b class=header-mark></a>0.1 1. ç®€ä»‹</h3><p>ç´¢å¼•å¯ä»¥æˆ‘ä»¬æ›´å¿«é€Ÿçš„æ‰§è¡ŒæŸ¥è¯¢ï¼Œä½†æ˜¯è‚¯å®šå­˜åœ¨ä¸åˆç†çš„ç´¢å¼•ï¼Œå¦‚æœæƒ³æ‰¾åˆ°é‚£äº›ç´¢å¼•ä¸æ˜¯å¾ˆåˆé€‚çš„æŸ¥è¯¢ï¼Œå¹¶åœ¨å®ƒä»¬æˆä¸ºé—®é¢˜å‰è¿›è¡Œä¼˜åŒ–ï¼Œåˆ™å¯ä»¥ä½¿ç”¨pt-query-digestçš„æŸ¥è¯¢å®¡æŸ¥â€œreviewâ€åŠŸèƒ½ï¼Œåˆ†æå…¶EXPLAINå‡ºæ¥çš„æ‰§è¡Œè®¡åˆ’ã€‚</p><p>pt-query-digestæ˜¯ç”¨äºåˆ†æmysqlæ…¢æŸ¥è¯¢çš„ä¸€ä¸ªå·¥å…·ï¼Œå®ƒå¯ä»¥åˆ†æbinlogã€General logã€slowlogï¼Œä¹Ÿå¯ä»¥é€šè¿‡SHOWPROCESSLISTæˆ–è€…é€šè¿‡tcpdumpæŠ“å–çš„MySQLåè®®æ•°æ®æ¥è¿›è¡Œåˆ†æã€‚å¯ä»¥æŠŠåˆ†æç»“æœè¾“å‡ºåˆ°æ–‡ä»¶ä¸­ï¼Œåˆ†æè¿‡ç¨‹æ˜¯å…ˆå¯¹æŸ¥è¯¢è¯­å¥çš„æ¡ä»¶è¿›è¡Œå‚æ•°åŒ–ï¼Œç„¶åå¯¹å‚æ•°åŒ–ä»¥åçš„æŸ¥è¯¢è¿›è¡Œåˆ†ç»„ç»Ÿè®¡ï¼Œç»Ÿè®¡å‡ºå„æŸ¥è¯¢çš„æ‰§è¡Œæ—¶é—´ã€æ¬¡æ•°ã€å æ¯”ç­‰ï¼Œå¯ä»¥å€ŸåŠ©åˆ†æç»“æœæ‰¾å‡ºé—®é¢˜è¿›è¡Œä¼˜åŒ–ã€‚</p><h3 id=2-install-percona-toolkit--pt-query-digest class=headerLink><a href=#2-install-percona-toolkit--pt-query-digest class=header-mark></a>0.2 2. Install Percona Toolkit & pt-query-digest</h3><p>percona-toolkitæ˜¯ä¸€ç»„é«˜çº§å‘½ä»¤è¡Œå·¥å…·çš„é›†åˆï¼Œç”¨æ¥æ‰§è¡Œå„ç§é€šè¿‡æ‰‹å·¥æ‰§è¡Œéå¸¸å¤æ‚å’Œéº»çƒ¦çš„mysqlå’Œç³»ç»Ÿä»»åŠ¡ã€‚è¿™äº›ä»»åŠ¡åŒ…æ‹¬ï¼š</p><ul><li>æ£€æŸ¥masterå’Œslaveæ•°æ®çš„ä¸€è‡´æ€§</li><li>æœ‰æ•ˆåœ°å¯¹è®°å½•è¿›è¡Œå½’æ¡£</li><li>æŸ¥æ‰¾é‡å¤çš„ç´¢å¼•</li><li>å¯¹æœåŠ¡å™¨ä¿¡æ¯è¿›è¡Œæ±‡æ€»</li><li>åˆ†ææ¥è‡ªæ—¥å¿—å’Œtcpdumpçš„æŸ¥è¯¢</li><li>å½“ç³»ç»Ÿå‡ºé—®é¢˜çš„æ—¶å€™æ”¶é›†é‡è¦çš„ç³»ç»Ÿä¿¡æ¯</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[root@ultrera ~]# wget percona.com/get/percona-toolkit.tar.gz
</span></span><span class=line><span class=cl>--2016-09-22 09:17:00--  http://percona.com/get/percona-toolkit.tar.gz
</span></span><span class=line><span class=cl>Resolving percona.com... 74.121.199.234, 74.121.199.234
</span></span><span class=line><span class=cl>Connecting to percona.com|74.121.199.234|:80... connected.
</span></span><span class=line><span class=cl>HTTP request sent, awaiting response... 301 Moved Permanently
</span></span><span class=line><span class=cl>Location: https://www.percona.com/get/percona-toolkit.tar.gz [following]
</span></span><span class=line><span class=cl>--2016-09-22 09:17:02--  https://www.percona.com/get/percona-toolkit.tar.gz
</span></span><span class=line><span class=cl>Resolving www.percona.com... 74.121.199.234, 74.121.199.234
</span></span><span class=line><span class=cl>Connecting to www.percona.com|74.121.199.234|:443... connected.
</span></span><span class=line><span class=cl>HTTP request sent, awaiting response... 302 Found
</span></span><span class=line><span class=cl>Location: https://www.percona.com/downloads/percona-toolkit/2.2.19/tarball/percona-toolkit-2.2.19.tar.gz [following]
</span></span><span class=line><span class=cl>--2016-09-22 09:17:03--  https://www.percona.com/downloads/percona-toolkit/2.2.19/tarball/percona-toolkit-2.2.19.tar.gz
</span></span><span class=line><span class=cl>Reusing existing connection to www.percona.com:443.
</span></span><span class=line><span class=cl>HTTP request sent, awaiting response... 200 OK
</span></span><span class=line><span class=cl>Length: 1425623 (1.4M) [application/x-gzip]
</span></span><span class=line><span class=cl>Saving to: â€œpercona-toolkit.tar.gzâ€
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>100%[=======================&gt;] 1,425,623    766K/s   in 1.8s
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>2016-09-22 09:17:05 (766 KB/s) - â€œpercona-toolkit.tar.gzâ€ saved [1425623/1425623]
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[root@ultrera ~]# tar xf percona-toolkit.tar.gz
</span></span><span class=line><span class=cl>[root@ultrera ~]# ls
</span></span><span class=line><span class=cl>percona-toolkit-2.2.19  percona-toolkit.tar.gz
</span></span><span class=line><span class=cl>[root@ultrera ~]# cd percona-toolkit-2.2.19
</span></span><span class=line><span class=cl>[root@ultrera percona-toolkit-2.2.19]# perl Makefile.PL
</span></span><span class=line><span class=cl>Warning: prerequisite DBD::mysql 3 not found.
</span></span><span class=line><span class=cl>Writing Makefile for percona-toolkit
</span></span><span class=line><span class=cl>[root@ultrera percona-toolkit-2.2.19]# make
</span></span><span class=line><span class=cl>cp bin/pt-mysql-summary blib/script/pt-mysql-summary
</span></span><span class=line><span class=cl>....
</span></span><span class=line><span class=cl>Manifying blib/man1/pt-index-usage.1p
</span></span><span class=line><span class=cl>Manifying blib/man1/pt-duplicate-key-checker.1p
</span></span><span class=line><span class=cl>Manifying blib/man1/pt-config-diff.1p
</span></span><span class=line><span class=cl>Manifying blib/man1/pt-stalk.1p
</span></span><span class=line><span class=cl>[root@ultrera percona-toolkit-2.2.19]# make install
</span></span><span class=line><span class=cl>Installing /usr/local/share/man/man1/pt-query-digest.1p
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>Installing /usr/local/bin/pt-query-digest
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>Appending installation info to /usr/lib64/perl5/perllocal.pod
</span></span></code></pre></td></tr></table></div></div><blockquote><p>è¿è¡Œå·¥å…·å¯èƒ½ä¼šé‡åˆ°ä¸‹é¢çš„é”™è¯¯: Can&rsquo;t locate Time/HiRes.pm in @INC</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># è§£å†³åŠæ³•ï¼š
</span></span><span class=line><span class=cl>[root@ultrera ~]# yum install -y perl-Time-HiRes
</span></span><span class=line><span class=cl>[root@ultrera ~]# pt-query-digest --version
</span></span><span class=line><span class=cl>pt-query-digest 2.2.19
</span></span></code></pre></td></tr></table></div></div><h3 id=3-å¼€å¯-mysqlæ…¢æ—¥å¿— class=headerLink><a href=#3-%e5%bc%80%e5%90%af-mysql%e6%85%a2%e6%97%a5%e5%bf%97 class=header-mark></a>0.3 3. å¼€å¯ mysqlæ…¢æ—¥å¿—</h3><h5 id=a-æŸ¥çœ‹å½“å‰slow_query_log-çŠ¶æ€ class=headerLink><a href=#a-%e6%9f%a5%e7%9c%8b%e5%bd%93%e5%89%8dslow_query_log-%e7%8a%b6%e6%80%81 class=header-mark></a>0.3.0.1 a. æŸ¥çœ‹å½“å‰â€˜slow_query_logâ€™ çŠ¶æ€ï¼š</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>mysql&gt; show variables like &#39;%query%&#39;;
</span></span><span class=line><span class=cl>+------------------------------+---------------------------------+
</span></span><span class=line><span class=cl>| Variable_name                | Value                           |
</span></span><span class=line><span class=cl>+------------------------------+---------------------------------+
</span></span><span class=line><span class=cl>| binlog_rows_query_log_events | OFF                             |
</span></span><span class=line><span class=cl>| ft_query_expansion_limit     | 20                              |
</span></span><span class=line><span class=cl>| have_query_cache             | YES                             |
</span></span><span class=line><span class=cl>| long_query_time              | 10.000000                       |
</span></span><span class=line><span class=cl>| query_alloc_block_size       | 8192                            |
</span></span><span class=line><span class=cl>| query_cache_limit            | 1048576                         |
</span></span><span class=line><span class=cl>| query_cache_min_res_unit     | 4096                            |
</span></span><span class=line><span class=cl>| query_cache_size             | 1048576                         |
</span></span><span class=line><span class=cl>| query_cache_type             | OFF                             |
</span></span><span class=line><span class=cl>| query_cache_wlock_invalidate | OFF                             |
</span></span><span class=line><span class=cl>| query_prealloc_size          | 8192                            |
</span></span><span class=line><span class=cl>| slow_query_log               | OFF                             |
</span></span><span class=line><span class=cl>| slow_query_log_file          | /var/lib/mysql/ultrera-slow.log |
</span></span><span class=line><span class=cl>+------------------------------+---------------------------------+
</span></span><span class=line><span class=cl>13 rows in set (0.00 sec)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>mysql&gt; show variables like &#39;log_queries_not_using_indexes&#39;;
</span></span><span class=line><span class=cl>+-------------------------------+-------+
</span></span><span class=line><span class=cl>| Variable_name                 | Value |
</span></span><span class=line><span class=cl>+-------------------------------+-------+
</span></span><span class=line><span class=cl>| log_queries_not_using_indexes | OFF   |
</span></span><span class=line><span class=cl>+-------------------------------+-------+
</span></span><span class=line><span class=cl>1 row in set (0.00 sec)
</span></span></code></pre></td></tr></table></div></div><h5 id=b-å¯åŠ¨slow_log-é…ç½® class=headerLink><a href=#b-%e5%90%af%e5%8a%a8slow_log-%e9%85%8d%e7%bd%ae class=header-mark></a>0.3.0.2 b. å¯åŠ¨slow_log, é…ç½®</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># è®¾å®šè®°å½•å¤§äº2sçš„sql
</span></span><span class=line><span class=cl>mysql&gt; set global long_query_time=2;
</span></span><span class=line><span class=cl>Query OK, 0 rows affected (0.00 sec)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># è®¾å®šlogå­˜æ”¾è·¯å¾„
</span></span><span class=line><span class=cl>mysql&gt; set global slow_query_log_file=&#39;/tmp/ultraera-slow.log&#39;;
</span></span><span class=line><span class=cl>Query OK, 0 rows affected (0.00 sec)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># å¯ç”¨æ…¢æ—¥å¿—
</span></span><span class=line><span class=cl>mysql&gt; set global slow_query_log=ON;
</span></span><span class=line><span class=cl>Query OK, 0 rows affected (0.00 sec)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># åŒæ—¶è®°å½•æ²¡æœ‰ä½¿ç”¨ç´¢å¼•çš„sql
</span></span><span class=line><span class=cl>mysql&gt; set global log_queries_not_using_indexes=on;
</span></span><span class=line><span class=cl>Query OK, 0 rows affected (0.00 sec)
</span></span></code></pre></td></tr></table></div></div><blockquote><p>ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œslow.log å¢å¤§çš„éå¸¸å¿«ï¼Œå®é™…ç”Ÿäº§ä¸­ï¼Œæ³¨æ„ä¸è¦è¢«slow.logå°†ç£ç›˜æ’‘æ»¡ï¼Œå½±å“åˆ°æ­£å¸¸ç”Ÿäº§ä½¿ç”¨ã€‚</p></blockquote><h3 id=4-åˆ†æ class=headerLink><a href=#4-%e5%88%86%e6%9e%90 class=header-mark></a>0.4 4. åˆ†æ</h3><p>pt-query-digestå¯ä»¥ä»æ™®é€šMySQLæ—¥å¿—ï¼Œæ…¢æŸ¥è¯¢æ—¥å¿—ä»¥åŠäºŒè¿›åˆ¶æ—¥å¿—ä¸­åˆ†ææŸ¥è¯¢ï¼Œç”šè‡³å¯ä»¥ä»SHOW PROCESSLISTå’ŒMySQLåè®®çš„tcpdumpä¸­è¿›è¡Œåˆ†æï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šæ–‡ä»¶ï¼Œå®ƒä»æ ‡å‡†è¾“å…¥æµï¼ˆSTDINï¼‰ä¸­è¯»å–æ•°æ®ã€‚</p><h5 id=a-ç®€å•ä½¿ç”¨æ–¹æ³• class=headerLink><a href=#a-%e7%ae%80%e5%8d%95%e4%bd%bf%e7%94%a8%e6%96%b9%e6%b3%95 class=header-mark></a>0.4.0.3 a. ç®€å•ä½¿ç”¨æ–¹æ³•ï¼š</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>pt-query-digest slow.logs
</span></span></code></pre></td></tr></table></div></div><p>è¾“å‡ºä¿¡æ¯å¦‚ä¸‹ï¼š</p><div align=left>![](http://images.cnitblog.com/blog/288950/201312/14135450-6f7a732598054f7aa311e95cbd4df3b1.png)</div><ul>1. Overallè¿™ä¸ªéƒ¨åˆ†æ˜¯ä¸€ä¸ªå¤§è‡´çš„æ¦‚è¦ä¿¡æ¯(ç±»ä¼¼loadrunnerç»™å‡ºçš„æ¦‚è¦ä¿¡æ¯)ï¼Œé€šè¿‡å®ƒå¯ä»¥å¯¹å½“å‰MySQLçš„æŸ¥è¯¢æ€§èƒ½åšä¸€ä¸ªåˆæ­¥çš„è¯„ä¼°ï¼Œæ¯”å¦‚å„ä¸ªæŒ‡æ ‡çš„æœ€å¤§å€¼(max)ï¼Œå¹³å‡å€¼(min)ï¼Œ95%åˆ†å¸ƒå€¼ï¼Œä¸­ä½æ•°(median)ï¼Œæ ‡å‡†åå·®(stddev)<li>æŸ¥è¯¢çš„æ‰§è¡Œæ—¶é—´ï¼ˆExec timeï¼‰</li><li>é”å ç”¨çš„æ—¶é—´ï¼ˆLock timeï¼‰</li><li>MySQLæ‰§è¡Œå™¨éœ€è¦æ£€æŸ¥çš„è¡Œæ•°ï¼ˆRows examineï¼‰</li><li>æœ€åè¿”å›ç»™å®¢æˆ·ç«¯çš„è¡Œæ•°ï¼ˆRows sentï¼‰</li><li>æŸ¥è¯¢çš„å¤§å°ã€‚</li></ul><ul>2. Profile<li>Rank ï¼š æ•´ä¸ªåˆ†æä¸­è¯¥â€œè¯­å¥â€çš„æ’åï¼Œä¸€èˆ¬ä¹Ÿå°±æ˜¯æ€§èƒ½æœ€æ…¢çš„</li><li>Query ID ï¼šæ¯ä¸ªæŸ¥è¯¢éƒ½æœ‰ä¸€ä¸ª</li><li>Response time ï¼š â€œè¯­å¥â€çš„å“åº”æ—¶é—´ä»¥åŠæ•´ä½“å æ¯”æƒ…å†µã€‚</li><li>Calls ï¼šâ€œè¯­å¥â€çš„æ‰§è¡Œæ¬¡æ•°</li><li>R/Call ï¼šæ¯æ¬¡æ‰§è¡Œçš„å¹³å‡å“åº”æ—¶é—´ã€‚</li><li>V/M</li></ul>##### è¯¦ç»†ä¿¡æ¯<p>åˆ—å‡ºä¸Šé¢Profileä¸­æ¯ä¸ªQuery IDçš„è¯¦ç»†ä¿¡æ¯</p><h5 id=b-ä»tcpdumpåŒ…ä¸­åˆ†æé€šè¿‡tcpdumpå‘½ä»¤æŠ“å–ä¸€å®šæ—¶é—´ç½‘ç»œæ•°æ®åŒ…ç„¶åè¿›è¡Œåˆ†æ class=headerLink><a href=#b-%e4%bb%8etcpdump%e5%8c%85%e4%b8%ad%e5%88%86%e6%9e%90%e9%80%9a%e8%bf%87tcpdump%e5%91%bd%e4%bb%a4%e6%8a%93%e5%8f%96%e4%b8%80%e5%ae%9a%e6%97%b6%e9%97%b4%e7%bd%91%e7%bb%9c%e6%95%b0%e6%8d%ae%e5%8c%85%e7%84%b6%e5%90%8e%e8%bf%9b%e8%a1%8c%e5%88%86%e6%9e%90 class=header-mark></a>0.4.0.4 b. ä»tcpdumpåŒ…ä¸­åˆ†æï¼šé€šè¿‡tcpdumpå‘½ä»¤æŠ“å–ä¸€å®šæ—¶é—´ç½‘ç»œæ•°æ®åŒ…ï¼Œç„¶åè¿›è¡Œåˆ†æï¼š</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>pt-query-digest --type tcpdump mysql.tcp.txt
</span></span></code></pre></td></tr></table></div></div><h5 id=c-pt-query-digest-è¿˜æ”¯æŒå¾ˆå¯¹å…¶ä»–çš„æ•°æ®åŒ…åˆ†æå½¢åŠ¿ä½†æ˜¯æˆ‘ä»¬ä¸»è¦ä½¿ç”¨çš„è¿˜æ˜¯é’ˆå¯¹æ…¢æ—¥å¿—è¿›è¡Œåˆ†æ class=headerLink><a href=#c-pt-query-digest-%e8%bf%98%e6%94%af%e6%8c%81%e5%be%88%e5%af%b9%e5%85%b6%e4%bb%96%e7%9a%84%e6%95%b0%e6%8d%ae%e5%8c%85%e5%88%86%e6%9e%90%e5%bd%a2%e5%8a%bf%e4%bd%86%e6%98%af%e6%88%91%e4%bb%ac%e4%b8%bb%e8%a6%81%e4%bd%bf%e7%94%a8%e7%9a%84%e8%bf%98%e6%98%af%e9%92%88%e5%af%b9%e6%85%a2%e6%97%a5%e5%bf%97%e8%bf%9b%e8%a1%8c%e5%88%86%e6%9e%90 class=header-mark></a>0.4.0.5 c. pt-query-digest è¿˜æ”¯æŒå¾ˆå¯¹å…¶ä»–çš„æ•°æ®åŒ…åˆ†æå½¢åŠ¿ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸»è¦ä½¿ç”¨çš„è¿˜æ˜¯é’ˆå¯¹æ…¢æ—¥å¿—è¿›è¡Œåˆ†æ</h5><blockquote><p>æ›´å¤šçš„å¸®åŠ©æ–‡æ¡£ï¼Œè¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼šhttp://www.percona.com/doc/percona-toolkit/2.2/pt-query-digest.html</p></blockquote><h3 id=5-ä½¿ç”¨anemometerå°†pt-query-digestçš„mysqlæ…¢æŸ¥è¯¢å¯è§†åŒ– class=headerLink><a href=#5-%e4%bd%bf%e7%94%a8anemometer%e5%b0%86pt-query-digest%e7%9a%84mysql%e6%85%a2%e6%9f%a5%e8%af%a2%e5%8f%af%e8%a7%86%e5%8c%96 class=header-mark></a>0.5 5. ä½¿ç”¨Anemometerå°†pt-query-digestçš„MySQLæ…¢æŸ¥è¯¢å¯è§†åŒ–</h3><ul><li>éœ€è¦å®‰è£…php 5.3 and over</li><li>éœ€è¦é¢„å…ˆé…ç½®mysqlæ•°æ®åº“</li><li>éœ€è¦é¢„å…ˆå®‰è£…å¥½pt-query-digest</li></ul><h5 id=51-å®‰è£… class=headerLink><a href=#51-%e5%ae%89%e8%a3%85 class=header-mark></a>0.5.0.6 5.1 å®‰è£…</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[root@ultrera ~]# git clone https://github.com/box/Anemometer.git anemometer
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[root@ultrera ~]# mv anemometer /var/www/html
</span></span><span class=line><span class=cl>[root@ultrera ~]# cd /var/www/html/anemometer/
</span></span><span class=line><span class=cl>[root@ultrera anemometer]# mysql -h localhost -u root -p &lt; mysql56-install.sql
</span></span><span class=line><span class=cl>[root@ultrera anemometer]# mysql -h localhost -u root -p -e &#34;grant all privileges on slow_query_log.* to &#39;anemometer&#39;@&#39;%&#39; identified by &#39;anemometer&#39;;&#34;
</span></span></code></pre></td></tr></table></div></div><h5 id=52-é…ç½® class=headerLink><a href=#52-%e9%85%8d%e7%bd%ae class=header-mark></a>0.5.0.7 5.2 é…ç½®</h5><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[root@ultrera anemometer]# cp conf/sample.config.inc.php conf/config.inc.php
</span></span><span class=line><span class=cl>[root@ultrera anemometer]# vim conf/config.inc.php
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># line 48,49 and line 284,285
</span></span><span class=line><span class=cl>è®¾ç½®æ•°æ®åº“çš„ç”¨æˆ·åå’Œå¯†ç ;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[root@ultrera anemometer]# vim conf/config.inc.php
</span></span><span class=line><span class=cl># line 7,8
</span></span><span class=line><span class=cl>è®¾ç½®æ•°æ®åº“çš„ç”¨æˆ·åå’Œå¯†ç ;
</span></span></code></pre></td></tr></table></div></div><h5 id=53-å¯¼å…¥ class=headerLink><a href=#53-%e5%af%bc%e5%85%a5 class=header-mark></a>0.5.0.8 5.3 å¯¼å…¥</h5><p>å°†pt-query-digest çš„åˆ†æç»“æœåˆ°anemometerï¼›</p><blockquote><p>pt-query-digest version &lt; 2.2</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>$ pt-query-digest --user=anemometer --password=superSecurePass \
</span></span><span class=line><span class=cl>                  --review h=db.example.com,D=slow_query_log,t=global_query_review \
</span></span><span class=line><span class=cl>                  --review-history h=db.example.com,D=slow_query_log,t=global_query_review_history \
</span></span><span class=line><span class=cl>                  --no-report --limit=0% \
</span></span><span class=line><span class=cl>                  --filter=&#34; \$event-&gt;{Bytes} = length(\$event-&gt;{arg}) and \$event-&gt;{hostname}=\&#34;$HOSTNAME\&#34;&#34; \
</span></span><span class=line><span class=cl>                  /var/lib/mysql/db.example.com-slow.log
</span></span></code></pre></td></tr></table></div></div><blockquote><p>pt-query-digest version >= 2.2</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>pt-query-digest --user=anemometer --password=superSecurePass \
</span></span><span class=line><span class=cl>                  --review h=db.example.com,D=slow_query_log,t=global_query_review \
</span></span><span class=line><span class=cl>                  --history h=db.example.com,D=slow_query_log,t=global_query_review_history \
</span></span><span class=line><span class=cl>                  --no-report --limit=0% \
</span></span><span class=line><span class=cl>                  --filter=&#34; \$event-&gt;{Bytes} = length(\$event-&gt;{arg}) and \$event-&gt;{hostname}=\&#34;$HOSTNAME\&#34;&#34; \
</span></span><span class=line><span class=cl>                  /var/lib/mysql/db.example.com-slow.log
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Pipeline process 11 (aggregate fingerprint) caused an error: Argument &#34;57A&#34; isn&#39;t numeric in numeric gt (&gt;) at (eval 40) line 6, &lt;&gt; line 27.
</span></span><span class=line><span class=cl>Pipeline process 11 (aggregate fingerprint) caused an error: Argument &#34;57B&#34; isn&#39;t numeric in numeric gt (&gt;) at (eval 40) line 6, &lt;&gt; line 28.
</span></span><span class=line><span class=cl>Pipeline process 11 (aggregate fingerprint) caused an error: Argument &#34;57C&#34; isn&#39;t numeric in numeric gt (&gt;) at (eval 40) line 6, &lt;&gt; line 29.
</span></span></code></pre></td></tr></table></div></div></div><h2>ç›¸å…³å†…å®¹</h2><div class=related-container><div class=related-item-container><h2 class=related-title><a href=/sql-%E5%AF%B9%E6%97%B6%E9%97%B4%E6%95%B4%E7%82%B9%E7%9A%84%E5%A4%84%E7%90%86/>SQL å¯¹æ—¶é—´æ•´ç‚¹çš„å¤„ç†</a></h2></div><div class=related-item-container><h2 class=related-title><a href=/mysql-%E5%91%BD%E4%BB%A4%E8%A1%8C%E8%BE%85%E5%8A%A9-mycli/>MySQL å‘½ä»¤è¡Œè¾…åŠ© mycli</a></h2></div><div class=related-item-container><h2 class=related-title><a href=/mysql-8-%E7%B4%A2%E5%BC%95%E5%88%9B%E5%BB%BA%E5%88%A0%E9%99%A4%E5%92%8C%E6%9F%A5%E7%9C%8B/>MySQL ç´¢å¼•åˆ›å»ºã€åˆ é™¤å’ŒæŸ¥çœ‹</a></h2></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>æ›´æ–°äº 2022-09-25&nbsp;<a class=git-hash href=https://github.com/samzong/hugo-blog//commit/9243fe224eeb848d7de2b457afbea88d8d7497fa target=_blank title="commit by samzong.lu(samzong.lu@gmail.com) 9243fe224eeb848d7de2b457afbea88d8d7497fa: init new blog" rel="noopener noreferrer">
<i class="fas fa-hashtag fa-fw"></i>9243fe2</a></span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-mardown href=/howto-use-pt-query-digest/index.md target=_blank rel="noopener noreferrer">é˜…è¯»åŸå§‹æ–‡æ¡£</a></span></div><div class=post-info-share><span><a href=# onclick=return!1 title="åˆ†äº«åˆ° Twitter" data-sharer=twitter data-url=https://samzong.me/howto-use-pt-query-digest/ data-title="HowTo Use pt-query-digest" data-via=samzong_lu data-hashtags=MySQL><i class="fab fa-twitter fa-fw"></i></a><a href=# onclick=return!1 title="åˆ†äº«åˆ° Facebook" data-sharer=facebook data-url=https://samzong.me/howto-use-pt-query-digest/ data-hashtag=MySQL><i class="fab fa-facebook-square fa-fw"></i></a><a href=# onclick=return!1 title="åˆ†äº«åˆ° å¾®åš" data-sharer=weibo data-url=https://samzong.me/howto-use-pt-query-digest/ data-title="HowTo Use pt-query-digest" data-ralateuid=3181653281><i class="fab fa-weibo fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/mysql/>MySQL</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>è¿”å›</a></span>&nbsp;|&nbsp;<span><a href=/>ä¸»é¡µ</a></span></section></div><div class=post-nav><a href=/%E7%94%9F%E8%80%85%E5%AD%A4%E7%8B%AC/ class=prev rel=prev title=ç”Ÿè€…å­¤ç‹¬><i class="fas fa-angle-left fa-fw"></i>ç”Ÿè€…å­¤ç‹¬</a>
<a href=/%E5%86%99%E7%9A%84%E5%BE%AE%E5%8D%9A/ class=next rel=next title=å¾®åšéšç¬”>å¾®åšéšç¬”<i class="fas fa-angle-right fa-fw"></i></a></div></div></article></div></main></div><div id=fixed-buttons><a href=#back-to-top id=back-to-top-button class=fixed-button title=å›åˆ°é¡¶éƒ¨><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=æŸ¥çœ‹è¯„è®º><i class="fas fa-comment fa-fw"></i></a></div><div id=cookieconsent-container></div><div class=assets><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript src=/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=/lib/fuse/fuse.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/tablesort/tablesort.min.js></script><script type=text/javascript src=/lib/cookieconsent/cookieconsent.min.js defer></script><script type=text/javascript src=/lib/topbar/topbar.min.js></script><script type=text/javascript src=/lib/pjax/pjax.min.js></script><script type=text/javascript src=/js/theme.min.js defer></script></div><div class=pjax-assets><script type=text/javascript>window.config={code:{copyTitle:"å¤åˆ¶åˆ°å‰ªè´´æ¿",maxShownLines:10},comment:{},cookieconsent:{content:{dismiss:" dismiss",link:"https://samzong.me",message:"è¿™æ˜¯ä¸€ä¸ªæç¤ºè¯­"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},lightGallery:{actualSize:!1,exThumbImage:"data-thumbnail",hideBarsDelay:2e3,selector:".lightgallery",speed:400,thumbContHeight:80,thumbWidth:80,thumbnail:!0},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{distance:100,findAllMatches:!1,fuseIndexURL:"/index.json",highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!1,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"æ²¡æœ‰æ‰¾åˆ°ç»“æœ",snippetLength:50,threshold:.3,type:"fuse",useExtendedSearch:!1},sharerjs:!0,table:{sort:!0},twemoji:!0}</script><script type=text/javascript src=/lib/twemoji/twemoji.min.js defer></script><script type=text/javascript src=/js/twemoji.min.js defer></script><script type=text/javascript src=/lib/lightgallery/lightgallery.min.js></script><script type=text/javascript src=/lib/lightgallery/lg-thumbnail.min.js></script><script type=text/javascript src=/lib/lightgallery/lg-zoom.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js defer></script><script type=text/javascript src=/lib/katex/auto-render.min.js defer></script><script type=text/javascript src=/lib/katex/copy-tex.min.js defer></script><script type=text/javascript src=/lib/katex/mhchem.min.js defer></script><script type=text/javascript src=/js/katex.min.js defer></script><script type=text/javascript src=/js/cookieconsent.min.js defer></script><link rel=stylesheet href=/lib/lightgallery/lightgallery.min.css><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/katex/copy-tex.min.css><noscript><link rel=stylesheet href=/lib/katex/copy-tex.min.css></noscript></div></body></html>